import Head from 'next/head'
import Image from 'next/image'
import {
  Card, CardLink, CardText, CardBody,
  CardTitle, CardSubtitle, Container, Row, Col
} from 'reactstrap';

import 'bootstrap/dist/css/bootstrap.min.css';
import styles from '../styles/Home.module.css'


export default function Home({list}) {
  return (
    <div className="container">
      <Head>
        <title>Create Next App</title>
        <meta name="description" content="Generated by create next app" />
        <link rel="icon" href="/favicon.ico" />
      </Head>


   
      <Container>
      <Row xs="4">
    {list.map(item=>(
       <Col xs="3">
      <Card  key={item.id}>
      <Image
                  src={item.img}
                  alt="My Image"
                  width={200}
                  height={200}

              />
            
        <CardBody>
          <CardTitle tag="h5">{item.nome}</CardTitle>
          <CardSubtitle tag="h6" className="mb-2 text-muted">Card subtitle</CardSubtitle>
        </CardBody>
        <CardBody>
          <CardText>Some quick example text to build on the card title and make up the bulk of the card's content.</CardText>
          <CardLink href={`/detalhe/${item.id}`}>Ver detalhes</CardLink>
          <CardLink href="#">Another Link</CardLink>
        </CardBody>
      </Card>
      </Col>
       ))}
      </Row>
    </Container>
    </div>
  )
}
export async function getServerSideProps(){
  const res = await fetch("http://localhost:3000/api/detalhe/cake") 
  const dados = await res.json()


  return {
    props: {
      list: dados
    }
  }
}